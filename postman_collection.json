{
	"info": {
		"name": "sm-market-value",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000"
		},
		{
			"key": "api_key",
			"value": "your-api-key"
		}
	],
	"item": [
		{
			"name": "Health & Scoring",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": ["{{base_url}}"],
							"path": ["health"]
						}
					}
				},
				{
					"name": "Score Sale (JSON only)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/score/2094",
							"host": ["{{base_url}}"],
							"path": ["api", "score", "2094"]
						}
					}
				},
				{
					"name": "Score Sale (CSV output)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/score/2094?output=csv",
							"host": ["{{base_url}}"],
							"path": ["api", "score", "2094"],
							"query": [
								{
									"key": "output",
									"value": "csv"
								}
							]
						}
					}
				},
				{
					"name": "Score Sale (DB output)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/score/2094?output=db",
							"host": ["{{base_url}}"],
							"path": ["api", "score", "2094"],
							"query": [
								{
									"key": "output",
									"value": "db"
								}
							]
						}
					}
				},
				{
					"name": "Commit Selected Lots",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"lots\": [\n    {\n      \"horse_id\": 789012,\n      \"sales_id\": 2094,\n      \"mv_expected_price\": 120000,\n      \"mv_low_price\": 75000,\n      \"mv_high_price\": 195000,\n      \"mv_expected_index\": 1.41,\n      \"mv_confidence_tier\": \"medium\",\n      \"session_median_price\": 85000\n    }\n  ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/score/2094/commit",
							"host": ["{{base_url}}"],
							"path": ["api", "score", "2094", "commit"]
						}
					}
				}
			]
		},
		{
			"name": "Training",
			"item": [
				{
					"name": "Train Model (auto version)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/train/aus",
							"host": ["{{base_url}}"],
							"path": ["api", "train", "aus"]
						}
					}
				},
				{
					"name": "Train Model (specific version)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/train/aus?version=v5",
							"host": ["{{base_url}}"],
							"path": ["api", "train", "aus"],
							"query": [
								{
									"key": "version",
									"value": "v5"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "Models",
			"item": [
				{
					"name": "List Models (AUS)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/models/aus",
							"host": ["{{base_url}}"],
							"path": ["api", "models", "aus"]
						}
					}
				},
				{
					"name": "List Models (NZL)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/models/nzl",
							"host": ["{{base_url}}"],
							"path": ["api", "models", "nzl"]
						}
					}
				}
			]
		},
		{
			"name": "Config - Models",
			"item": [
				{
					"name": "Get All Active Models",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/config/models",
							"host": ["{{base_url}}"],
							"path": ["api", "config", "models"]
						}
					}
				},
				{
					"name": "Set Active Model (AUS)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/config/models/aus?model=aus_v5",
							"host": ["{{base_url}}"],
							"path": ["api", "config", "models", "aus"],
							"query": [
								{
									"key": "model",
									"value": "aus_v5"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "Config - Years",
			"item": [
				{
					"name": "Get Year Range",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/config/years",
							"host": ["{{base_url}}"],
							"path": ["api", "config", "years"]
						}
					}
				},
				{
					"name": "Set Year Start (year_end=current)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/config/years?year_start=2020",
							"host": ["{{base_url}}"],
							"path": ["api", "config", "years"],
							"query": [
								{
									"key": "year_start",
									"value": "2020"
								}
							]
						}
					}
				},
				{
					"name": "Set Year Range (fixed year_end)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/config/years?year_start=2020&year_end=2027",
							"host": ["{{base_url}}"],
							"path": ["api", "config", "years"],
							"query": [
								{
									"key": "year_start",
									"value": "2020"
								},
								{
									"key": "year_end",
									"value": "2027"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "Config - Test Years",
			"item": [
				{
					"name": "Get Test Years",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/config/test-years",
							"host": ["{{base_url}}"],
							"path": ["api", "config", "test-years"]
						}
					}
				},
				{
					"name": "Set Test Years",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/config/test-years?model_test_last_years=2",
							"host": ["{{base_url}}"],
							"path": ["api", "config", "test-years"],
							"query": [
								{
									"key": "model_test_last_years",
									"value": "2"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "Config - Hist Countries",
			"item": [
				{
					"name": "Get All Hist Countries",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/config/hist-countries",
							"host": ["{{base_url}}"],
							"path": ["api", "config", "hist-countries"]
						}
					}
				},
				{
					"name": "Get Hist Countries (NZL)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/config/hist-countries/NZL",
							"host": ["{{base_url}}"],
							"path": ["api", "config", "hist-countries", "NZL"]
						}
					}
				},
				{
					"name": "Set Hist Countries (NZL)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/config/hist-countries/NZL?hist_countries=NZL&hist_countries=AUS",
							"host": ["{{base_url}}"],
							"path": ["api", "config", "hist-countries", "NZL"],
							"query": [
								{
									"key": "hist_countries",
									"value": "NZL"
								},
								{
									"key": "hist_countries",
									"value": "AUS"
								}
							]
						}
					}
				},
				{
					"name": "Delete Hist Countries (NZL)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/config/hist-countries/NZL",
							"host": ["{{base_url}}"],
							"path": ["api", "config", "hist-countries", "NZL"]
						}
					}
				}
			]
		}
	]
}
